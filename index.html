<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>INDOVP Demon List</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #eee;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    .level {
      background: #222;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.6);
    }
    .record {
      margin-left: 15px;
      font-size: 14px;
    }
    input, button {
      margin: 5px 0;
      padding: 6px;
      border-radius: 6px;
      border: none;
    }
    input {
      width: 120px;
    }
    button {
      background: #2a6cf4;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #1d4bd1;
    }
    .owner-login-box {
      background: #222;
      padding: 15px;
      border-radius: 12px;
      margin: 0 auto 30px;
      max-width: 400px;
      text-align: center;
    }
    .owner-section {
      background: #333;
      padding: 15px;
      border-radius: 12px;
      margin-top: 30px;
    }
    .ghost { display: none; }
  </style>
</head>
<body>
  <h1>INDOVP Demon List</h1>

  <!-- Owner Login -->
  <h2 style="text-align:center;margin-bottom:12px">🔑 Owner-Login</h2>
  <div class="owner-login-box">
    <input id="ownerCodeInput" type="text" placeholder="Owner-Code (z.B. 41342)">
    <button id="ownerLoginBtn">Login</button>
    <button id="ownerLogoutBtn" class="ghost">Logout</button>
    <p id="ownerStatus"></p>
  </div>

  <!-- Level Liste -->
  <div id="levels"></div>

  <!-- Owner Bereich -->
  <div id="ownerSection" class="owner-section ghost">
    <h2>📥 Eingereichte Runs (Owner)</h2>
    <div id="pendingRuns"></div>
  </div>

  <script>
    // --- Daten: Level Liste ---
    const levels = [
      {id:1, name:"Beispiel-Easy", difficulty:"Easy", creator:"Player123"},
      {id:2, name:"Beispiel-Medium", difficulty:"Medium", creator:"SigmaXD"},
      {id:3, name:"Beispiel-Hard", difficulty:"Hard", creator:"GigaPro"},
      {id:4, name:"Beispiel-Insane", difficulty:"Insane", creator:"Tryhard"},
      {id:5, name:"Beispiel-Extreme", difficulty:"Extreme", creator:"Sweat"},
    ];

    // --- LocalStorage ---
    let records = JSON.parse(localStorage.getItem("demonRecords") || "{}");

    function saveRecords(){
      localStorage.setItem("demonRecords", JSON.stringify(records));
    }

    // --- Level Rendern ---
    function renderLevels(){
      const container = document.getElementById("levels");
      container.innerHTML = "";
      levels.forEach(level=>{
        const div = document.createElement("div");
        div.className="level";
        div.innerHTML = `
          <h2>${level.name} <small>${level.difficulty}</small></h2>
          <p>Creator: ${level.creator}</p>
          <h4>Rekorde:</h4>
          <div id="records-${level.id}"></div>
          <div>
            <input id="name-${level.id}" placeholder="Name">
            <input id="percent-${level.id}" type="number" placeholder="%">
            <input id="att-${level.id}" type="number" placeholder="Attempts">
            <button onclick="submitRecord(${level.id})">Einreichen</button>
          </div>
        `;
        container.appendChild(div);
        renderRecords(level.id);
      });
    }

    function renderRecords(levelId){
      const recDiv = document.getElementById("records-"+levelId);
      recDiv.innerHTML="";
      if(records[levelId]){
        records[levelId].forEach(r=>{
          const p=document.createElement("p");
          p.className="record";
          p.textContent=`${r.name} — ${r.percent}% in ${r.attempts} Attempts`;
          recDiv.appendChild(p);
        });
      }
    }

    function submitRecord(levelId){
      const name=document.getElementById("name-"+levelId).value;
      const percent=document.getElementById("percent-"+levelId).value;
      const att=document.getElementById("att-"+levelId).value;
      if(!name||!percent||!att) return alert("Bitte alles ausfüllen!");
      if(!records[levelId]) records[levelId]=[];
      const run={name,percent,attempts:att};
      records[levelId].push(run);
      saveRecords();
      renderRecords(levelId);
      if(isOwner) addPending(levelId, run);
    }

    // --- Owner Mode ---
    const ownerCode="41342";
    let isOwner=false;

    document.getElementById("ownerLoginBtn").onclick=()=>{
      const val=document.getElementById("ownerCodeInput").value;
      if(val===ownerCode){
        isOwner=true;
        document.getElementById("ownerStatus").textContent="✅ Eingeloggt als Owner";
        document.getElementById("ownerLogoutBtn").style.display="inline-block";
        document.getElementById("ownerLoginBtn").style.display="none";
        document.getElementById("ownerSection").classList.remove("ghost");
        renderPending();
      } else {
        alert("❌ Falscher Code!");
      }
    };
    document.getElementById("ownerLogoutBtn").onclick=()=>{
      isOwner=false;
      document.getElementById("ownerStatus").textContent="❌ Nicht eingeloggt";
      document.getElementById("ownerLogoutBtn").style.display="none";
      document.getElementById("ownerLoginBtn").style.display="inline-block";
      document.getElementById("ownerSection").classList.add("ghost");
    };

    // --- Pending Runs im Owner Bereich ---
    function renderPending(){
      const box=document.getElementById("pendingRuns");
      box.innerHTML="";
      for(const lid in records){
        records[lid].forEach(r=>{
          const p=document.createElement("p");
          const level=levels.find(l=>l.id==lid);
          p.textContent=`[${level.name}] ${r.name} — ${r.percent}% in ${r.attempts} Attempts`;
          box.appendChild(p);
        });
      }
    }
    function addPending(levelId, run){
      if(isOwner) renderPending();
    }

    // --- Init ---
    renderLevels();
  </script>
</body>
</html>
